(this["webpackJsonptwittor-fe"]=this["webpackJsonptwittor-fe"]||[]).push([[0],{32:function(e,t,a){},39:function(e,t,a){},41:function(e,t,a){},43:function(e,t,a){},46:function(e,t,a){},47:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a(11),s=a.n(r),c=a(8),o=a(7),i=a(51),l=a(49),j=a(26),u=a(54),d=a(52),b=a.p+"static/media/logo-white.13c88c37.png",h=(a(32),a(1));function O(e){var t=e.show,a=e.setShow,n=e.children;return Object(h.jsxs)(d.a,{className:"basic-modal",show:t,onHide:function(){return a(!1)},centered:!0,size:"lg",children:[Object(h.jsx)(d.a.Header,{children:Object(h.jsx)(d.a.Title,{children:Object(h.jsx)("img",{src:b,alt:"Logo"})})}),Object(h.jsx)(d.a.Body,{children:n})]})}var m=a(18),p=a(19),f=a.p+"static/media/logo.0d659bb2.png",g=(a(39),a(14)),x=a(9),w=a(53),v=a(50),C=a(13);function S(e){return/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(String(e).toLowerCase())}var y="https://go-react-twittor.herokuapp.com",L="token",k=a(24);function E(){localStorage.removeItem(L)}function P(){var e=localStorage.getItem(L);return e?(function(e){return 1e3*Object(k.a)(e).exp-Date.now()<=0}(e)&&E(),Object(k.a)(e)):(E(),null)}a(41);var T=function(){return{name:"",last_name:"",mail:"",password:"",repeatPassword:""}},R=function(e){var t=Object(n.useState)(T()),a=Object(c.a)(t,2),r=a[0],s=a[1],i=Object(n.useState)(!1),d=Object(c.a)(i,2),b=d[0],O=d[1],m=e.setShowModal;return Object(h.jsxs)("div",{className:"sign-up-form",children:[Object(h.jsx)("h2",{children:"Crea tu cuenta"}),Object(h.jsxs)(w.a,{onSubmit:function(e){e.preventDefault();var t=0;Object(C.values)(r).some((function(e){return e&&t++,null})),t!==Object(C.size)(r)?o.b.warning("Completa todos los campos del formulario"):S(r.mail)?r.password!==r.repeatPassword?o.b.warning("Las contrase\xf1as no coinciden"):Object(C.size)(r.password)<6?o.b.warning("La contrase\xf1as debe tener al menos 6 caracteres"):(O(!0),function(e){var t="".concat(y,"/register"),a=Object(x.a)(Object(x.a)({},e),{},{mail:e.mail.toLowerCase(),birthdate:new Date});delete a.repeatPassword;var n={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)};return fetch(t,n).then((function(e){return e.status>=200&&e.status<300?e.json():{code:404,message:"Email ya esta registrado"}})).then((function(e){return e})).catch((function(e){return e}))}(r).then((function(e){e.code?o.b.warning(e.message):(o.b.success("Registro Exitoso"),m(!1),s(T()))})).catch((function(e){o.b.error("Error en el registro, intentelo mas tarde")})).finally((function(){O(!1)}))):o.b.warning("E-mail invalido")},onChange:function(e){s(Object(x.a)(Object(x.a)({},r),{},Object(g.a)({},e.target.name,e.target.value)))},children:[Object(h.jsx)(w.a.Group,{children:Object(h.jsxs)(l.a,{children:[Object(h.jsx)(j.a,{children:Object(h.jsx)(w.a.Control,{type:"text",placeholder:"Nombre",defaultValue:r.name,name:"name"})}),Object(h.jsx)(j.a,{children:Object(h.jsx)(w.a.Control,{type:"text",placeholder:"Apellido",defaultValue:r.last_name,name:"last_name"})})]})}),Object(h.jsx)(w.a.Group,{children:Object(h.jsx)(w.a.Control,{type:"email",placeholder:"E-mail",defaultValue:r.mail,name:"mail"})}),Object(h.jsx)(w.a.Group,{children:Object(h.jsxs)(l.a,{children:[Object(h.jsx)(j.a,{children:Object(h.jsx)(w.a.Control,{type:"password",placeholder:"Contrase\xf1a",defaultValue:r.password,name:"password"})}),Object(h.jsx)(j.a,{children:Object(h.jsx)(w.a.Control,{type:"password",placeholder:"Repetir Contrase\xf1a",defaultValue:r.repeatPassword,name:"repeatPassword"})})]})}),Object(h.jsx)(u.a,{variant:"primary",type:"submit",children:b?Object(h.jsx)(v.a,{animation:"border"}):"Registrate"})]})]})};a(43);function M(e){var t=e.setRefreshCheckLogin,a=Object(n.useState)(N()),r=Object(c.a)(a,2),s=r[0],i=r[1],l=Object(n.useState)(!1),j=Object(c.a)(l,2),d=j[0],b=j[1];e.setShowModal;return Object(h.jsxs)("div",{className:"sign-in-form",children:[Object(h.jsx)("h2",{children:"Inicia Sesi\xf3n"}),Object(h.jsxs)(w.a,{onSubmit:function(e){e.preventDefault();var a=0;Object(C.values)(s).some((function(e){return e&&a++,null})),a!==Object(C.size)(s)?o.b.warning("Completa todos los campos del formulario"):S(s.mail)?(b(!0),function(e){var t="".concat(y,"/login"),a=Object(x.a)(Object(x.a)({},e),{},{mail:e.mail.toLowerCase()}),n={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)};return fetch(t,n).then((function(e){return e.status>=200&&e.status<300?e.json():{code:404,message:"Email ya esta registrado"}})).then((function(e){return e})).catch((function(e){return e}))}(s).then((function(e){var a;e.code?o.b.warning(e.message):(a=e.token,localStorage.setItem(L,a),t(!0))})).catch((function(e){o.b.error("Error en el inicio de sesion, intentelo mas tarde")})).finally((function(){b(!1)}))):o.b.warning("E-mail invalido")},onChange:function(e){i(Object(x.a)(Object(x.a)({},s),{},Object(g.a)({},e.target.name,e.target.value)))},children:[Object(h.jsx)(w.a.Group,{children:Object(h.jsx)(w.a.Control,{type:"text",placeholder:"E-mail",defaultValue:s.mail,name:"mail"})}),Object(h.jsx)(w.a.Group,{children:Object(h.jsx)(w.a.Control,{type:"password",placeholder:"Password",defaultValue:s.password,name:"password"})}),Object(h.jsx)(u.a,{variant:"primary",type:"submit",children:d?Object(h.jsx)(v.a,{animation:"border"}):"Iniciar Sesi\xf3n"})]})]})}var N=function(){return{mail:"",password:""}};function I(e){var t=e.setRefreshCheckLogin,a=Object(n.useState)(!1),r=Object(c.a)(a,2),s=r[0],o=r[1],j=Object(n.useState)(null),u=Object(c.a)(j,2),d=u[0],b=u[1];return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(i.a,{className:"signin-signup",fluid:!0,children:Object(h.jsxs)(l.a,{children:[Object(h.jsx)(V,{}),Object(h.jsx)(_,{openModal:function(e){o(!0),b(e)},setShowModal:o,setRefreshCheckLogin:t})]})}),Object(h.jsx)(O,{show:s,setShow:o,children:d})]})}function V(){return Object(h.jsxs)(j.a,{className:"signin-signup__left",xs:6,children:[Object(h.jsx)("img",{src:f,alt:"Twittor"}),Object(h.jsxs)("div",{children:[Object(h.jsxs)("h2",{children:[Object(h.jsx)(m.a,{icon:p.b}),"Sigue lo que te interesa."]}),Object(h.jsxs)("h2",{children:[Object(h.jsx)(m.a,{icon:p.c}),"Ent\xe9rate de qu\xe9 est\xe1 hablando la gente."]}),Object(h.jsxs)("h2",{children:[Object(h.jsx)(m.a,{icon:p.a}),"\xdanete a la conversaci\xf3n."]})]})]})}function _(e){var t=e.openModal,a=e.setShowModal,n=e.setRefreshCheckLogin;return Object(h.jsx)(j.a,{className:"signin-signup__right",xs:6,children:Object(h.jsxs)("div",{children:[Object(h.jsx)("img",{src:b,alt:"Twittor"}),Object(h.jsx)("h2",{children:"Mira lo que est\xe1 pasando en el mundo en este momento"}),Object(h.jsx)("h3",{children:"\xdanete a Twittor hoy mismo."}),Object(h.jsx)(u.a,{variant:"primary",onClick:function(){return t(Object(h.jsx)(R,{setShowModal:a}))},children:"Reg\xedstrate"}),Object(h.jsx)(u.a,{variant:"outline-primary",onClick:function(){return t(Object(h.jsx)(M,{setShowModal:a,setRefreshCheckLogin:n}))},children:"Inicia Sesi\xf3n"})]})})}var z=Object(n.createContext)();var D=function(){var e=Object(n.useState)(null),t=Object(c.a)(e,2),a=t[0],r=t[1],s=Object(n.useState)(!1),i=Object(c.a)(s,2),l=i[0],j=i[1],u=Object(n.useState)(!1),d=Object(c.a)(u,2),b=d[0],O=d[1];return Object(n.useEffect)((function(){r(P()),O(!1),j(!0)}),[b]),l?Object(h.jsxs)(z.Provider,{value:a,children:[Object(h.jsx)("h1",{children:a?Object(h.jsx)("div",{children:'"Logueado"'}):Object(h.jsx)("div",{children:Object(h.jsx)(I,{setRefreshCheckLogin:O})})}),Object(h.jsx)(o.a,{position:"top-right",autoClose:5e3,hideProgressBar:!0,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnVisibilityChange:!0,draggable:!0,pauseOnHover:!0})]}):null},F=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,55)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,s=t.getLCP,c=t.getTTFB;a(e),n(e),r(e),s(e),c(e)}))};a(44),a(45),a(46);s.a.render(Object(h.jsx)(D,{}),document.getElementById("root")),F()}},[[47,1,2]]]);
//# sourceMappingURL=main.3831cc28.chunk.js.map